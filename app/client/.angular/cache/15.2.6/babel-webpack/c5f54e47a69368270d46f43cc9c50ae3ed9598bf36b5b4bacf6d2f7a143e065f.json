{"ast":null,"code":"import _defineProperty from \"/Users/malaklahlou/Downloads/Car_Website/app/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { CommunicationService } from 'src/app/services/communication.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/communication.service\";\nimport * as i3 from \"@angular/common\";\nfunction MemberPageComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r4);\n  }\n}\nfunction MemberPageComponent_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r5);\n  }\n}\nfunction MemberPageComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r6);\n  }\n}\nfunction MemberPageComponent_option_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r7);\n  }\n}\nexport let MemberPageComponent = /*#__PURE__*/(() => {\n  class MemberPageComponent {\n    constructor(formBuilder, communicationService) {\n      _defineProperty(this, \"formBuilder\", void 0);\n      _defineProperty(this, \"communicationService\", void 0);\n      _defineProperty(this, \"registrationForm\", void 0);\n      _defineProperty(this, \"placeOptions\", []);\n      _defineProperty(this, \"coopMemberOptions\", []);\n      _defineProperty(this, \"carpoolingMemberOptions\", []);\n      _defineProperty(this, \"allVehicles\", []);\n      _defineProperty(this, \"vehicleOptions\", []);\n      _defineProperty(this, \"isVehicleOptionsEmpty\", false);\n      _defineProperty(this, \"newReservationId\", void 0);\n      _defineProperty(this, \"allPlaces\", 'Tous les emplacements');\n      this.formBuilder = formBuilder;\n      this.communicationService = communicationService;\n    }\n    ngOnInit() {\n      this.registrationForm = this.formBuilder.group({\n        member: ['', Validators.required],\n        place: ['', Validators.required],\n        startDate: ['', Validators.required],\n        endDate: ['', Validators.required],\n        requirements: [null],\n        vehicle: ['', Validators.required]\n      });\n      this.communicationService.getLocations().subscribe(response => {\n        if (response) {\n          this.placeOptions = response.map(location => location.nomemplacement);\n          this.placeOptions.unshift(this.allPlaces);\n          if (this.placeOptions.length > 0) {\n            this.registrationForm.patchValue({\n              place: this.placeOptions[0]\n            });\n          }\n        }\n      });\n      this.communicationService.getCoopMembers().subscribe(response => {\n        if (response) {\n          this.coopMemberOptions = response.map(member => member.prenom + ' ' + member.nom + ' (' + member.mid + ')');\n          this.registrationForm.patchValue({\n            member: this.coopMemberOptions[0]\n          });\n        }\n      });\n      this.communicationService.getCarpoolingMembers().subscribe(response => {\n        if (response) {\n          this.carpoolingMemberOptions = response.map(member => member.prenom + ' ' + member.nom + ' (' + member.mid + ')');\n        }\n      });\n      this.communicationService.getVehicles().subscribe(response => {\n        if (response) {\n          this.allVehicles = response;\n          this.onSelect(this.allPlaces);\n          this.registrationForm.patchValue({\n            vehicle: this.vehicleOptions[0]\n          });\n        }\n      });\n      this.communicationService.getLastReservation().subscribe(response => {\n        if (response) {\n          this.newReservationId = this.createNewReservationId(response[0].reservationid);\n        }\n      });\n    }\n    onSubmit() {\n      if (this.isVehicleOptionsEmpty) {\n        alert('Aucun véhicule disponible pour cet emplacement');\n        return;\n      }\n      const startDate = this.registrationForm.value.startDate;\n      const endDate = this.registrationForm.value.endDate;\n      if (!this.isValidDate(startDate, endDate)) {\n        alert('La date de début doit être antérieure à la date de fin');\n        return;\n      }\n      if (this.registrationForm.valid) {\n        const reservation = {\n          reservationid: this.newReservationId,\n          reservationstart: this.registrationForm.value.startDate,\n          reservationend: this.registrationForm.value.endDate,\n          exigencessup: this.registrationForm.value.requirements,\n          vehiculeid: this.extractEntityId(this.registrationForm.value.vehicle),\n          mid: +this.extractEntityId(this.registrationForm.value.member)\n        };\n        this.communicationService.addReservation(reservation).subscribe(response => {});\n        alert('Réservation créée avec succès');\n      }\n    }\n    isValidDate(startDate, endDate) {\n      const startDateObj = new Date(startDate);\n      const endDateObj = new Date(endDate);\n      return startDateObj < endDateObj;\n    }\n    extractEntityId(entity) {\n      const entityId = entity.slice(entity.indexOf('(') + 1, entity.indexOf(')'));\n      return entityId;\n    }\n    createNewReservationId(lastReservationId) {\n      const lastReservationIdNumber = Number(lastReservationId.slice(3));\n      const newReservationIdNumber = lastReservationIdNumber + 1;\n      const paddedNewReservationIdNumber = newReservationIdNumber.toString().padStart(4, '0');\n      return 'RSV' + paddedNewReservationIdNumber;\n    }\n    onSelect(selectedPlace) {\n      if (selectedPlace === this.allPlaces) {\n        this.vehicleOptions = this.allVehicles.map(vehicle => vehicle.marque + ' ' + vehicle.modele + ' (' + vehicle.plaqueimmatriculation + ')' + ' - ' + vehicle.nomemplacement);\n        this.isVehicleOptionsEmpty = false;\n      } else {\n        this.vehicleOptions = this.allVehicles.filter(vehicle => vehicle.nomemplacement === selectedPlace).map(vehicle => vehicle.marque + ' ' + vehicle.modele + ' (' + vehicle.plaqueimmatriculation + ')' + ' - ' + vehicle.nomemplacement);\n        this.isVehicleOptionsEmpty = false;\n      }\n      if (this.vehicleOptions.length === 0) {\n        this.vehicleOptions.push('Aucun véhicule disponible');\n        this.isVehicleOptionsEmpty = true;\n      }\n    }\n  }\n  _defineProperty(MemberPageComponent, \"\\u0275fac\", function MemberPageComponent_Factory(t) {\n    return new (t || MemberPageComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CommunicationService));\n  });\n  _defineProperty(MemberPageComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MemberPageComponent,\n    selectors: [[\"app-member-page\"]],\n    decls: 90,\n    vars: 5,\n    consts: [[1, \"center-container\"], [3, \"formGroup\", \"ngSubmit\"], [\"for\", \"member\"], [\"name\", \"member\", \"formControlName\", \"member\"], [\"label\", \"Membre coop\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"label\", \"Membre autopartage\"], [\"for\", \"place\"], [\"name\", \"place\", \"formControlName\", \"place\", 3, \"change\"], [\"type\", \"datetime-local\", \"formControlName\", \"startDate\"], [\"type\", \"datetime-local\", \"formControlName\", \"endDate\"], [\"for\", \"requirements\"], [\"type\", \"text\", \"name\", \"requirements\", \"formControlName\", \"requirements\"], [\"for\", \"vehicle\"], [\"name\", \"vehicle\", \"formControlName\", \"vehicle\"], [\"type\", \"submit\"], [1, \"hexa-membership-section\"], [1, \"container\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"hms-hdng-con\"], [1, \"hexa-round-short-heading\", \"orange\"], [1, \"section-common-heading\"], [1, \"haas-rc-col-content\"], [1, \"col-md-12\"], [1, \"hms-type-con\"], [1, \"hms-tc-column\", \"hms-column-1\"], [1, \"hms-tcb-item\"], [1, \"hms-tcb-item-shape\"], [1, \"hms-tcb-item-content-box\"], [\"src\", \"https://dummyimage.com/300x300/000/fff\", \"alt\", \"\", 1, \"img-fluid\", \"hms-tcb-icb-img\"], [1, \"hms-tcb-icb-heading\"], [1, \"hms-tcb-icb-content\"], [\"href\", \"comingsoon\", \"data-toggle\", \"modal\", \"data-target\", \".modal\", 1, \"btn\", \"btn-primary\", \"btn-orange\"], [1, \"hms-tc-column\", \"hms-column-2\"], [1, \"hms-tc-column\", \"hms-column-3\"], [1, \"hms-tc-column\", \"hms-column-4\"], [3, \"value\"]],\n    template: function MemberPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function MemberPageComponent_Template_form_ngSubmit_1_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(2, \"label\", 2);\n        i0.ɵɵtext(3, \"Membre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"select\", 3)(5, \"optgroup\", 4);\n        i0.ɵɵtemplate(6, MemberPageComponent_option_6_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"optgroup\", 6);\n        i0.ɵɵtemplate(8, MemberPageComponent_option_8_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"label\", 7);\n        i0.ɵɵtext(10, \"Emplacement\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"select\", 8);\n        i0.ɵɵlistener(\"change\", function MemberPageComponent_Template_select_change_11_listener($event) {\n          return ctx.onSelect($event.target.value);\n        });\n        i0.ɵɵtemplate(12, MemberPageComponent_option_12_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"label\");\n        i0.ɵɵtext(14, \"Date de d\\u00E9but\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"input\", 9);\n        i0.ɵɵelementStart(16, \"label\");\n        i0.ɵɵtext(17, \"Date de fin\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"input\", 10);\n        i0.ɵɵelementStart(19, \"label\", 11);\n        i0.ɵɵtext(20, \"Exigences suppl\\u00E9mentaires\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 12);\n        i0.ɵɵelementStart(22, \"label\", 13);\n        i0.ɵɵtext(23, \"V\\u00E9hicule\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"select\", 14);\n        i0.ɵɵtemplate(25, MemberPageComponent_option_25_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"button\", 15);\n        i0.ɵɵtext(27, \"Cr\\u00E9er la r\\u00E9servation\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"div\", 16)(29, \"div\", 17)(30, \"div\", 18)(31, \"div\", 19)(32, \"div\", 20)(33, \"span\", 21);\n        i0.ɵɵtext(34, \"Choose Your Membership\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"h2\", 22);\n        i0.ɵɵtext(36, \"ML SHARE Memberships\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"h4\");\n        i0.ɵɵtext(38, \"An Array of \");\n        i0.ɵɵelement(39, \"br\");\n        i0.ɵɵtext(40, \"ML SHARE Memberships\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"p\", 23);\n        i0.ɵɵtext(42, \"Welcome to our cooperative community! We offer diverse membership options tailored to meet your specific needs and preferences. Explore the options below to find the perfect fit for you:\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(43, \"div\", 18)(44, \"div\", 24)(45, \"div\", 25)(46, \"div\", 26)(47, \"div\", 27)(48, \"div\", 28)(49, \"div\", 29);\n        i0.ɵɵelement(50, \"img\", 30);\n        i0.ɵɵelementStart(51, \"h2\", 31);\n        i0.ɵɵtext(52, \"COOP Membership\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"p\", 32);\n        i0.ɵɵtext(54, \"If you are interested in trying out ML services while maintaining the greatest possible flexibility for your activities, the Free Spirit membership may be right for you. Also known as the TFS, this shared office space arrangement offers you\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"a\", 33);\n        i0.ɵɵtext(56, \"Know More\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(57, \"div\", 34)(58, \"div\", 27)(59, \"div\", 28)(60, \"div\", 29);\n        i0.ɵɵelement(61, \"img\", 30);\n        i0.ɵɵelementStart(62, \"h2\", 31);\n        i0.ɵɵtext(63, \"YOUR VIRTUAL OFFICE\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"p\", 32);\n        i0.ɵɵtext(65, \"Also known as the YVO, Your Virtual Office allows you to work from the comfort of your own home while enjoying all the amenities of a real office. You can access many practical benefits of YVO membership without the commute.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"a\", 33);\n        i0.ɵɵtext(67, \"Know More\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(68, \"div\", 35)(69, \"div\", 27)(70, \"div\", 28)(71, \"div\", 29);\n        i0.ɵɵelement(72, \"img\", 30);\n        i0.ɵɵelementStart(73, \"h2\", 31);\n        i0.ɵɵtext(74, \"MY HEXAN HOME\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(75, \"p\", 32);\n        i0.ɵɵtext(76, \"At the top end of our membership lineup, the HEXAN Home membership includes private offices to allow the most comfortable and practical working experience for you and your staff members. Our private offices are fully furnished\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(77, \"a\", 33);\n        i0.ɵɵtext(78, \"Know More\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(79, \"div\", 36)(80, \"div\", 27)(81, \"div\", 28)(82, \"div\", 29);\n        i0.ɵɵelement(83, \"img\", 30);\n        i0.ɵɵelementStart(84, \"h2\", 31);\n        i0.ɵɵtext(85, \"FULLY FLEDGED HEXAN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(86, \"p\", 32);\n        i0.ɵɵtext(87, \"If your business needs a comprehensive solution for temporary working space, the HEXAN may be the right membership level for you. Dedicated desks make it much easier for you and your staff members to maintain high levels of productivity\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(88, \"a\", 33);\n        i0.ɵɵtext(89, \"Know More\");\n        i0.ɵɵelementEnd()()()()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.registrationForm);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.coopMemberOptions);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.carpoolingMemberOptions);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.placeOptions);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngForOf\", ctx.vehicleOptions);\n      }\n    },\n    dependencies: [i3.NgForOf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\".center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.auth-container[_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #ccc;padding:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #ccc;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-size:1.2rem;padding:.5rem 1rem;border:none;border-radius:.3rem;cursor:pointer;transition:background-color .2s}.alert[_ngcontent-%COMP%]{display:flex;color:red;font-weight:700}.hexa-membership-section[_ngcontent-%COMP%]{padding:100px 0}.hms-type-con[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.hms-hdng-con[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.75rem;color:#222427;font-weight:700}.hms-tc-column[_ngcontent-%COMP%]{width:50%;display:inline-block;vertical-align:top;position:relative;min-height:1px;padding-left:0;padding-right:30px;-ms-box-sizing:border-box;box-sizing:border-box}.hms-tcb-item[_ngcontent-%COMP%]{padding:3.125rem 0}.hms-tcb-item[_ngcontent-%COMP%]{position:relative}.hms-tcb-item[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;width:100%;height:100%;-ms-box-sizing:border-box;box-sizing:border-box}.hms-tcb-item-shape[_ngcontent-%COMP%]{width:100%;height:38.75rem;filter:drop-shadow(2px 0px 4px rgba(196,225,235,.5));display:inline-block;padding:15rem 4.375rem 1em;position:relative;overflow:hidden;border-top-left-radius:50px;border-bottom-left-radius:50px;border-bottom-right-radius:50px}.hms-tcb-item-shape[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fff;z-index:-1;border-top-right-radius:50px;border-top-left-radius:50px;transform:skewY(-16deg);transform-origin:100% 0%}.hms-tcb-item-content-box[_ngcontent-%COMP%]   .hms-tcb-icb-heading[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;text-transform:uppercase}.hms-tcb-icb-img[_ngcontent-%COMP%]{position:absolute;top:0;max-width:200px;border-radius:.5rem;box-shadow:0 0 30px #1e2f4a4d}.hms-tcb-icb-content[_ngcontent-%COMP%]{font-size:.875rem;color:#3d4153;line-height:1.75rem;margin-bottom:1.5rem}.hms-tc-column.hms-column-1[_ngcontent-%COMP%]{padding:0 100px 0 0}.hms-tc-column.hms-column-2[_ngcontent-%COMP%]{padding:0 0 0 100px}.hms-tc-column.hms-column-2[_ngcontent-%COMP%]   .hms-tcb-item[_ngcontent-%COMP%]{top:-16rem}.hms-tc-column.hms-column-3[_ngcontent-%COMP%]{padding:0 100px 0 0}.hms-tc-column.hms-column-4[_ngcontent-%COMP%]{padding:0 0 0 100px}.hms-tc-column.hms-column-4[_ngcontent-%COMP%]   .hms-tcb-item[_ngcontent-%COMP%]{top:-16rem}@media (max-width: 767.98px){.hms-tc-column[_ngcontent-%COMP%]{width:50%}}\"]\n  }));\n  return MemberPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}